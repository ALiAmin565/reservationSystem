<x-layout.master>

    <!-- Bootstrap CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Modal -->
    <div class="modal fade" id="social" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content bg-transparent border-0">
                <div class="modal-body p-1 bg-transparent d-flex justify-content-center">
                    <div class="social-bar">
                        <nav class="nav justify-content-center">
                            <a id="facebook" class="nav-link"
                                href="https://www.facebook.com/sharer/sharer.php?%20%20%20%20%20u=https%3a%2f%2fwww.almutahidah.com%2fAccount%2fRegister&amp;t=almutahidah"
                                target="_blank">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a id="twitter" class="nav-link"
                                href="https://twitter.com/intent/tweet?%20%20%20url=https%3a%2f%2fwww.almutahidah.com%2fAccount%2fRegister&amp;text=https%3a%2f%2fwww.almutahidah.com%2fAccount%2fRegister"
                                target="_blank" title="Tweet" rel="noopener noreferrer nofollow">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a id="instagram" class="nav-link"
                                href="https://www.instagram.com/mutahidahco/?igshid=MzRlODBiNWFlZA" target="_blank"
                                rel="noopener">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a id="telegram" class="nav-link"
                                href="https://telegram.me/share/url?%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20url=https%3a%2f%2fwww.almutahidah.com%2fAccount%2fRegister&amp;text=https%3a%2f%2fwww.almutahidah.com%2fAccount%2fRegister"
                                target="_blank" rel="noopener noreferrer nofollow">
                                <i class="fab fa-telegram-plane"></i>
                            </a>
                            <a id="whatsapp" class=" nav-link "
                                href="https://wa.me/?text=https%3a%2f%2fwww.almutahidah.com%2fAccount%2fRegister&amp;url=https%3a%2f%2fwww.almutahidah.com%2fAccount%2fRegister"
                                target="_blank">
                                <i class="fab fa-whatsapp"></i>
                            </a>

                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="inner-header">
        <div class="pb-5 text-center">
            <h1 class="font-bold fs-28 text-white"><span class="d-inline-block pb-2 px-5"> معلومات الشخصية </span>
            </h1>
        </div>
    </div>

    <div class="container position-relative mb-4">
        <div class="row py-lg-4 py-3">

            <div class="col-lg-10 offset-lg-1">
                <div class="bg-brand fs-24 my-4 p-1 rounded-32 text-center text-white "> معلومات الشخصية</div>
                <div class="row">
                    <div class="col-md-10 offset-md-1">
                        <span class="text-danger">
                            <div class="validation-summary-valid" data-valmsg-summary="true">
                                <ul>
                                    <li style="display:none"></li>
                                </ul>
                            </div>
                        </span>
                        <!-- Font Awesome -->
                        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
                            rel="stylesheet" />
                        <!-- Google Fonts -->
                        <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
                            rel="stylesheet" />
                        <!-- MDB -->
                        <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.2.0/mdb.min.css"
                            rel="stylesheet" />
                        <style>
                            body,
                            #profile {
                                background-color: #330033;
                                background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 800 800'%3E%3Cg fill='none' stroke='%23404' stroke-width='1'%3E%3Cpath d='M769 229L1037 260.9M927 880L731 737 520 660 309 538 40 599 295 764 126.5 879.5 40 599-197 493 102 382-31 229 126.5 79.5-69-63'/%3E%3Cpath d='M-31 229L237 261 390 382 603 493 308.5 537.5 101.5 381.5M370 905L295 764'/%3E%3Cpath d='M520 660L578 842 731 737 840 599 603 493 520 660 295 764 309 538 390 382 539 269 769 229 577.5 41.5 370 105 295 -36 126.5 79.5 237 261 102 382 40 599 -69 737 127 880'/%3E%3Cpath d='M520-140L578.5 42.5 731-63M603 493L539 269 237 261 370 105M902 382L539 269M390 382L102 382'/%3E%3Cpath d='M-222 42L126.5 79.5 370 105 539 269 577.5 41.5 927 80 769 229 902 382 603 493 731 737M295-36L577.5 41.5M578 842L295 764M40-201L127 80M102 382L-261 269'/%3E%3C/g%3E%3Cg fill='%23505'%3E%3Ccircle cx='769' cy='229' r='5'/%3E%3Ccircle cx='539' cy='269' r='5'/%3E%3Ccircle cx='603' cy='493' r='5'/%3E%3Ccircle cx='731' cy='737' r='5'/%3E%3Ccircle cx='520' cy='660' r='5'/%3E%3Ccircle cx='309' cy='538' r='5'/%3E%3Ccircle cx='295' cy='764' r='5'/%3E%3Ccircle cx='40' cy='599' r='5'/%3E%3Ccircle cx='102' cy='382' r='5'/%3E%3Ccircle cx='127' cy='80' r='5'/%3E%3Ccircle cx='370' cy='105' r='5'/%3E%3Ccircle cx='578' cy='42' r='5'/%3E%3Ccircle cx='237' cy='261' r='5'/%3E%3Ccircle cx='390' cy='382' r='5'/%3E%3C/g%3E%3C/svg%3E");
                            }
                        </style>
                        <section id="profile" dir="rtl">
                            <div class="container py-5">


                                <div class="row">
                                    <div class="col-lg-4">
                                        <div class="card mb-4">
                                            <div class="card-body text-center">
                                                <img src="https://img.freepik.com/premium-vector/user-profile-icon-flat-style-member-avatar-vector-illustration-isolated-background-human-permission-sign-business-concept_157943-15752.jpg"
                                                    alt="avatar" class="rounded-circle img-fluid"
                                                    style="width: 150px;">
                                                <h5 class="my-3">{{ $user->name }} </h5>
                                                <p class="text-muted mb-1"> {{ $user->phone }}</p>
                                                <p class="text-muted mb-4"> {{ $user->email }}</p>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-lg-8">
                                        <!-- User Profile Section -->
                                        <div class="card mb-4">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <p class="mb-0">Full Name</p>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <p class="text-muted mb-0">{{ $user->name }}</p>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <p class="mb-0">Email</p>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <p class="text-muted mb-0">{{ $user->email }}</p>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <p class="mb-0">Phone</p>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <p class="text-muted mb-0">{{ $user->phone }}</p>
                                                    </div>
                                                </div>
                                                <hr>
                                                <div class="row">
                                                    <div class="col-sm-3">
                                                        <p class="mb-0">Address</p>
                                                    </div>
                                                    <div class="col-sm-9">
                                                        <p class="text-muted mb-0">{{ $user->address }}</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="card mb-4 mb-md-0">
                                                        <div class="card-body">
                                                            {{-- <p class="mb-4"><span
                                                                    class="text-primary font-italic me-1">بيانات
                                                                    التعاقدات
                                                                    السابقة</span>
                                                            </p> --}}
                                                            <table class="table" style="margin:-1rem;">
                                                                <thead>
                                                                    <tr>
                                                                        <th scope="col">اسم الطلب</th>
                                                                        <th scope="col">الحالة</th>
                                                                        <th scope="col">طباعة الطلب</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @foreach ($activeReservations as $valueOne)
                                                                        {{-- @dd(); --}}
                                                                        <tr>
                                                                            <td>{{ $valueOne->service_name }}</td>
                                                                    <td>{{ $valueOne->active === 0 ? 'غير مفعل' : 'مفعل' }}</td>

                                                                            <td>
                                                                                <button class="btn btn-primary"
                                                                                    onclick="showDetails('active', {{ json_encode($valueOne) }} , {{ json_encode($valueOne->nationalityData) }} , {{ json_encode($valueOne->period) }})">طباعة</button>
                                                                            </td>
                                                                        </tr>
                                                                    @endforeach

                                                                    @foreach ($inactiveReservations as $valueTwo)
                                                                        <tr>
                                                                            <td>طلب مخصص</td>
                                                                            <td>{{ $valueTwo->active }}</td>
                                                                            <td>
                                                                                <button class="btn btn-primary"
                                                                                    onclick="showDetails('inactive', {{ json_encode($valueTwo) }})">طباعة</button>
                                                                            </td>
                                                                        </tr>
                                                                    @endforeach
                                                                </tbody>
                                                            </table>

                                                            <!-- Modal -->
                                                            <div class="modal fade" id="detailsModal" tabindex="-1"
                                                                aria-labelledby="detailsModalLabel"
                                                                aria-hidden="true">
                                                                <div class="modal-dialog modal-lg">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="detailsModalLabel">تفاصيل الطلب
                                                                            </h5>
                                                                            {{-- <button type="button" class="btn-close"
                                                                                data-bs-dismiss="modal"
                                                                                aria-label="Close"></button> --}}
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <div id="detailsContent"></div>
                                                                        </div>
                                                                        <div class="modal-footer">
                                                                            {{-- <button type="button"
                                                                                class="btn btn-secondary"
                                                                                id="modalActionButtonPrint">إغلاق</button> --}}
                                                                            <button type="button"
                                                                                class="btn btn-primary"
                                                                                onclick="window.print()">طباعة</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- MDB -->
                        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.2.0/mdb.umd.min.js"></script>
                    </div>

                </div>
            </div>

        </div>
    </div>

    <style>
        .navbar-light .navbar-toggler-icon {
            background-image: black !important;
        }

        .navbar {
            box-shadow: none !important;

        }
    </style>
    <!-- Bootstrap JS Bundle (includes Popper) -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        function showDetails(type, data, nationality = null, period = null) {
            let content = '';
            if (type === 'active') {
                content += `
                    <p>اسم الخدمة: ${data.service_name}</p>
                   
                    <p>عدد الزيارات: ${data.number_of_visits}</p>
                    <p>عدد العمال: ${data.number_of_man_services}</p>
                    <p>الفترة : ${period.period}</p>
                    <p>الحالة: ${data.active === 1 ? 'مفعل' : 'غير مفعل'}</p>
                  
                    <p>الجنسية: ${nationality.name}</p>
                    <p>اجمالي سعر الخدمة شامل الضريبة : ${ (data.price - data.price * data.discount /100 ) * ( 1 + data.service_charge /100)  }</p>
                `;
            } else {
                content += `
                    <p>معرف المستخدم: ${data.user_id}</p>
                    <p>المدينة: ${data.city}</p>
                    <p>اسم الشارع: ${data.street_name}</p>
                    <p>رقم المبنى: ${data.building_number}</p>
                    <p>رقم الطابق: ${data.floor_number}</p>
                    <p>رقم المنزل: ${data.house_number}</p>
                    <p>العنوان الكامل: ${data.full_address}</p>
                    <p>رقم الهاتف: ${data.phone_number}</p>
                    <p>عدد الخدمات: ${data.service_count}</p>
                    <p>الزيارات الأسبوعية: ${data.weekly_visits}</p>
                    <p>مدة العقد: ${data.contract_duration}</p>
                    <p>أول زيارة: ${data.first_visit}</p>
                    <p>عدد الساعات: ${data.hours_count}</p>
                    <p>طريقة الدفع: ${data.payment_method}</p>
                    <p>الحالة: ${data.active === 1 ? 'مفعل' : 'غير مفعل'}</p>
                    <p>معرف المعاملة: ${data.transaction_id}</p>
                    <p>الفترة: ${data.period}</p>
                    <p>السعر الإجمالي: ${data.total_price}</p>
                    <p>الجنسية: ${data.nationality}</p>
                `;
            }

            document.getElementById('detailsContent').innerHTML = content;
            var detailsModal = new bootstrap.Modal(document.getElementById('detailsModal'));
            detailsModal.show();
        }

        document.getElementById('modalActionButtonPrint').addEventListener('click', function() {
            // Perform the desired action here
            var detailsModals = new bootstrap.Modal(document.getElementById('detailsModal'));
            // var detailsModalPrint = document.getElementById('detailsModal');
            detailsModals.hide();
        });
    </script>
</x-layout.master>
